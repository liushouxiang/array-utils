{"version":3,"sources":["webpack://array-utils/./index.ts","webpack://array-utils/webpack/bootstrap","webpack://array-utils/webpack/startup"],"names":["origin","Operator","toString","Object","prototype","isFunction","obj","call","isRegExp","data","ordering","Error","this","where","query","entries","filter","item","type","matched","field","rule","hasOwnProperty","test","orderBy","includes","length","sort","a","b","get","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__"],"mappings":"6bAMA,gBAAqBA,GACjB,OAAO,IAAIC,EAASD,IAGxB,IAAME,EAAWC,OAAOC,UAAUF,SAWlC,SAASG,EAAWC,GAChB,MAA8B,sBAAvBJ,EAASK,KAAKD,GAGzB,SAASE,EAASF,GACd,MAA8B,oBAAvBJ,EAASK,KAAKD,GAGzB,iBAKI,WAAYN,GACR,GAJI,KAAAS,KAAiB,KACjB,KAAAC,SAAsC,CAAC,MAAO,QAfzCJ,EAkBIN,EAjBa,mBAAvBE,EAASK,KAAKD,GAkBb,MAAM,IAAIK,MAAM,4BAnB5B,IAAiBL,EAqBTM,KAAKH,KAAO,EAAIT,GAuDxB,OApDI,YAAAa,MAAA,SAAMC,GACF,IAAKA,GAA0B,iBAAVA,EACjB,MAAM,IAAIH,MAAM,4BAEpB,IAAMI,EAAUZ,OAAOY,QAAQD,GAsB/B,OArBAF,KAAKH,KAAOG,KAAKH,KAAKO,QAAO,SAACC,GAE1B,IADA,IAnCSX,EACXY,EAkCMC,GAAU,EACc,MAAAJ,EAAA,eAAS,CAA1B,WAACK,EAAK,KAAEC,EAAI,KACnB,GAAKJ,EAAKK,eAAeF,GAAzB,CAGA,QAvCNF,WADWZ,EAwCWe,GAtCd,MAAPf,GAAyB,WAATY,GAA8B,aAATA,EAuC5BC,EAAUF,EAAKG,KAAWC,OACvB,GAAIhB,EAAWgB,GAClBF,EAAqBE,EAAMd,KAAK,KAAMU,EAAKG,GAAQH,OAChD,KAAIT,EAASa,GAGhB,MAAM,IAAIV,MAAM,8DAFhBQ,EAAmBE,EAAME,KAAKN,EAAKG,IAIvC,IAAKD,EACD,OAGR,OAAOA,KAEJP,MAGX,YAAAY,QAAA,SAAQJ,EAAeV,GACnB,QADmB,IAAAA,MAAA,QACdE,KAAKF,SAASe,SAASf,GACxB,MAAM,IAAIC,MAAM,0CAEpB,IAAKC,KAAKH,KAAKiB,OACX,MAAO,GAEX,IAAMT,EAAOL,KAAKH,KAAK,GACvB,IAAKQ,EAAKK,eAAeF,GACrB,MAAM,IAAIT,MAAM,kBAAkBS,EAAK,qBAE3C,GAA2B,iBAAhBH,EAAKG,GACZ,MAAM,IAAIT,MAAM,+CAKpB,OAHAC,KAAKH,KAAKkB,MAAK,SAACC,EAAGC,GACf,MAAoB,QAAbnB,EAAqBkB,EAAER,GAASS,EAAET,GAASS,EAAET,GAASQ,EAAER,MAE5D,EAAIR,KAAKH,OAGpB,YAAAqB,IAAA,WACI,OAAO,EAAIlB,KAAKH,OAExB,EAhEA,GAAa,EAAAR,aC5BT8B,EAA2B,GCE/B,ODCA,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUC,QAG3C,IAAIC,EAASJ,EAAyBE,GAAY,CAGjDC,QAAS,IAOV,OAHAE,EAAoBH,GAAU1B,KAAK4B,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAGpEG,EAAOD,QCjBRF,CAAoB,M","file":"index.js","sourcesContent":["type ItemList = {[prop: string]: any}[];\n\ntype QueryObj = {\n    [prop: string]: null | undefined | number | boolean | string | symbol | bigint | Function | RegExp,\n};\n\nexport function find(origin: ItemList): Operator {\n    return new Operator(origin);\n}\n\nconst toString = Object.prototype.toString;\n\nfunction isPrimitive(obj: any): boolean {\n    const type: string = typeof obj;\n    return obj == null || (type !== 'object' && type !== 'function');\n}\n\nfunction isArray(obj: any): boolean {\n    return toString.call(obj) === '[object Array]';\n}\n\nfunction isFunction(obj: any): boolean {\n    return toString.call(obj) === '[object Function]';\n}\n\nfunction isRegExp(obj: any) {\n    return toString.call(obj) === '[object RegExp]';\n}\n\nexport class Operator {\n\n    private data: ItemList = null;\n    private ordering: readonly [string, string] = ['asc', 'desc'];\n\n    constructor(origin: ItemList) {\n        if (!isArray(origin)) {\n            throw new Error('origin must be an array.');\n        }\n        this.data = [...origin];\n    }\n\n    where(query: QueryObj): Operator {\n        if (!query || typeof query !== 'object') {\n            throw new Error('query must be an object.');\n        }\n        const entries = Object.entries(query);\n        this.data = this.data.filter((item) => {\n            let matched = true;\n            for (const [field, rule] of entries) {\n                if (!item.hasOwnProperty(field)) {\n                    continue;\n                }\n                if (isPrimitive(rule)) {\n                    matched = item[field] === rule;\n                } else if (isFunction(rule)) {\n                    matched = (<Function>rule).call(null, item[field], item);\n                } else if (isRegExp(rule)) {\n                    matched = (<RegExp>rule).test(item[field]);\n                } else {\n                    throw new Error('query rule must be function, regexp or any primitive type.');\n                }\n                if (!matched) {\n                    break;\n                }\n            }\n            return matched;\n        });\n        return this;\n    }\n\n    orderBy(field: string, ordering = 'asc'): ItemList {\n        if (!this.ordering.includes(ordering)) {\n            throw new Error('ordering must be one of \"asc\", \"desc\".');\n        }\n        if (!this.data.length) {\n            return [];\n        }\n        const item = this.data[0];\n        if (!item.hasOwnProperty(field)) {\n            throw new Error(`unknown field \"${field}\" in origin data.`);\n        }\n        if (typeof item[field] !== 'number') {\n            throw new Error('type of the sorting field must be a number.');\n        }\n        this.data.sort((a, b) => {\n            return ordering === 'asc' ? a[field] - b[field] : b[field] - a[field];\n        });\n        return [...this.data];\n    }\n\n    get(): ItemList {\n        return [...this.data];\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(492);\n"],"sourceRoot":""}